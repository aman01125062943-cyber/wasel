{
  "meta": {
    "project": "Islamic Reminders WhatsApp SaaS Platform",
    "date": "2026-01-15",
    "prepared_by": "Generated by Assistant"
  },
  "product_overview": "A comprehensive SaaS platform for automated Islamic reminders via WhatsApp with subscription management, multi-session WhatsApp handling, accurate prayer and fasting reminders, and a rich Islamic content library.",
  "core_goals": [
    "Provide automated Islamic reminders (prayer times, fasting days, adhkar, and hadith) via WhatsApp.",
    "Enable multi-session WhatsApp account management with secure QR code linking and connection monitoring.",
    "Support a flexible subscription system with multiple subscription plans and secure payment integration.",
    "Offer an intuitive dashboard and content management system for admins and users.",
    "Ensure accurate Islamic prayer and fasting schedules based on location and multiple calculation methods.",
    "Allow users to add and manage multiple recipients for personalized reminder delivery."
  ],
  "key_features": [
    "Secure user authentication and flexible subscription plans (trial, monthly, yearly) with integration for Vodafone Cash and Instapay payments.",
    "Multi-WhatsApp session management with QR code linking, session status monitoring, and test message sending.",
    "Dynamic prayer time reminders using AlAdhan API with customizable pre-adhan notification times and diverse location settings (country/city or GPS).",
    "Fasting reminders for specific days (Mondays, Thursdays, White days) with automatic nightly sending.",
    "Content library including morning/evening adhkar and daily hadith with scheduling at specific times (7:00 AM, 12:00 PM, 5:00 PM).",
    "Recipient management supporting multiple recipients and groups, along with activation controls.",
    "Responsive and RTL-supported user interface with dark/light mode themes.",
    "Robust security with bcrypt password hashing, JWT-based authentication, helmet.js, rate limiting, CSRF, XSS, and SQL injection protections.",
    "Automated scheduling using node-cron for daily content delivery and fasting reminders."
  ],
  "user_flow_summary": [
    "User registers or logs in securely with JWT authentication.",
    "User selects or upgrades subscription plans with payment via supported methods.",
    "User links one or more WhatsApp sessions by scanning QR codes and monitors connection statuses.",
    "User configures location settings for prayer and fasting reminders (manual or GPS-based).",
    "User customizes reminder settings, including prayer times, fasting days, and preferred content modes (manual reading or visual media).",
    "User adds and manages multiple recipients or groups for message delivery.",
    "System sends scheduled Islamic reminders automatically according to configured schedules.",
    "Admins manage content library, user subscriptions, and platform settings via the dashboard."
  ],
  "validation_criteria": [
    "User authentication and authorization flows enforce security and role-based access correctly.",
    "Subscription status accurately controls user access to reminder services.",
    "WhatsApp sessions can be created, linked via QR, monitored for connectivity, and messages sent successfully.",
    "Prayer times and fasting reminders are correctly calculated and sent according to location and configured times.",
    "Content library updates (add, edit, delete) reflect instantly and schedule tasks trigger at assigned times.",
    "User interface behaves responsively on different screen sizes, with proper sidebar behavior on mobile devices.",
    "Scheduled jobs run reliably using node-cron, delivering reminders at specified intervals.",
    "Security measures prevent unauthorized data access, prevent XSS/CSRF attacks, and protect the database from injection.",
    "APIs respond with appropriate status codes and error messages under different conditions."
  ],
  "code_summary": {
    "tech_stack": [
      "JavaScript",
      "Node.js",
      "Express",
      "EJS",
      "SQLite",
      "Jest",
      "Supertest"
    ],
    "features": [
      {
        "name": "Islamic reminders experience mode toggle",
        "description": "In the Islamic reminders dashboard, admins can switch between manual reading mode and visual media mode for adhkar and hadith content via buttons that trigger setExperienceMode, which updates UI state and persists sources (morning, evening, hadith) in the database.",
        "files": [
          "src/views/dashboard/islamic-reminders.ejs"
        ]
      },
      {
        "name": "User dashboard mobile sidebar behavior",
        "description": "On the user dashboard, the sidebar becomes a fixed off-canvas panel on smaller screens, and the floating sidebar toggle button is disabled in mobile view to avoid overlay issues while keeping the main content scrollable with adjusted padding.",
        "files": [
          "src/views/dashboard/user.ejs"
        ]
      }
    ]
  }
}
